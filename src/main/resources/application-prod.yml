# ============================================
# Production 환경 설정 (운영 서버)
# 실행: --spring.profiles.active=prod
# ============================================

spring:
  # 데이터소스 설정 (운영 서버 PostgreSQL)
  datasource:
    url: jdbc:postgresql://prod-db-server:5432/migration_db
    username: prod_user
    password: ${DB_PASSWORD}  # 환경변수로 주입 (필수!)
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 30
      minimum-idle: 15
      connection-timeout: 120000  # 스트리밍 대용량 처리 대비 120초 (2분)
      idle-timeout: 600000
      max-lifetime: 1800000

# 로깅 설정 (운영 서버 - 성능 최적화)
logging:
  level:
    root: INFO
    com.kt.yaap.mig_batch: INFO               # 필수 정보만
    com.kt.yaap.mig_batch.config: INFO
    com.kt.yaap.mig_batch.batch: INFO
    org.springframework.batch: INFO
    com.kt.yaap.mig_batch.mapper: WARN        # SQL 로그 제거 (성능!)
    org.mybatis: WARN
    org.apache.ibatis: WARN
  pattern:
    console: "%d{HH:mm:ss.SSS} %-5level %logger{20} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: /opt/crm-mig/logs/crm-migration-prod.log
    max-size: 1GB
    max-history: 90

# 배치 실행 설정 (운영 서버 - 대용량 최적화)
migration:
  chunk-size: 5000  # 큰 청크로 성능 최적화

# SafeDB 설정 (운영 서버 - 실제 SafeDB)
safedb:
  enabled: true
  config-file: classpath:safedb-prod.properties
  # server-url: ${SAFEDB_URL}  # 환경변수로 주입
  # api-key: ${SAFEDB_API_KEY}
  # timeout: 30000
