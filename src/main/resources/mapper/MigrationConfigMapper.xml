<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kt.yaap.mig_batch.mapper.MigrationConfigMapper">

    <!-- ResultMap -->
    <resultMap id="MigrationConfigResultMap" type="com.kt.yaap.mig_batch.model.MigrationConfigEntity">
        <result property="targetTableName" column="target_table_name"/>
        <result property="targetColumnName" column="target_column_name"/>
    </resultMap>

    <!-- 마이그레이션 설정 목록 조회 -->
    <select id="selectActiveConfigs" resultMap="MigrationConfigResultMap">
        SELECT 
            target_table_name,
            target_column_name
        FROM migration_config
    </select>

    <!-- 설정 ID로 조회 (더 이상 사용하지 않지만 인터페이스 호환성을 위해 유지) -->
    <select id="selectByConfigId" parameterType="long" resultMap="MigrationConfigResultMap">
        SELECT 
            target_table_name,
            target_column_name
        FROM migration_config
        LIMIT 1
    </select>

</mapper>

